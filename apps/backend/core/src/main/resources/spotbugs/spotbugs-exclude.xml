<?xml version="1.0" encoding="UTF-8"?>
<FindBugsFilter>
    <!-- Lombok generated code (inner classes, builder patterns) -->
    <Match>
        <Class name="~.*\$.*"/>
    </Match>

    <!-- Generated code (gRPC, Protobuf, etc.) -->
    <Match>
        <Or>
            <Package name="~.*\.grpc\..*"/>
            <Package name="~.*\.proto\..*"/>
            <Package name="~.*\.generated\..*"/>
        </Or>
    </Match>

    <!-- Record classes - Defensive copy not needed for immutable records -->
    <Match>
        <Package name="com.schemafy.core.model.record"/>
        <Or>
            <Bug pattern="EI_EXPOSE_REP"/>
            <Bug pattern="EI_EXPOSE_REP2"/>
        </Or>
    </Match>

    <!-- DTOs and Request/Response classes - Often designed for data transfer -->
    <Match>
        <Or>
            <Class name="~.*DTO$"/>
            <Class name="~.*Request$"/>
            <Class name="~.*Response$"/>
        </Or>
        <Bug pattern="EI_EXPOSE_REP"/>
    </Match>

    <!-- Spring Boot Configuration Properties - Framework managed -->
    <Match>
        <Class name="~.*Properties$"/>
        <Or>
            <Bug pattern="EI_EXPOSE_REP"/>
            <Bug pattern="EI_EXPOSE_REP2"/>
        </Or>
    </Match>

    <!-- Spring Boot Application main class -->
    <Match>
        <Class name="~.*Application$"/>
        <Bug pattern="ST_WRITE_TO_STATIC_FROM_INSTANCE_METHOD"/>
    </Match>

    <!-- Test classes - More lenient rules -->
    <Match>
        <Or>
            <Class name="~.*Test$"/>
            <Class name="~.*Tests$"/>
            <Class name="~.*TestCase$"/>
        </Or>
        <Or>
            <Bug pattern="RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE"/>
            <Bug pattern="NP_NULL_ON_SOME_PATH"/>
        </Or>
    </Match>

    <!-- Reactor/WebFlux patterns - Intentional blocking operations in tests -->
    <Match>
        <Or>
            <Class name="~.*Test$"/>
            <Class name="~.*Tests$"/>
        </Or>
        <Bug pattern="RV_RETURN_VALUE_IGNORED"/>
    </Match>

    <!-- Missing classes from compilation (synthetic methods, third-party dependencies) -->
    <Match>
        <Bug pattern="UNKNOWN"/>
    </Match>

    <!-- Performance: Inner class could be static - Intentional for Spring context -->
    <Match>
        <Class name="~.*Configuration\$.*"/>
        <Bug pattern="SIC_INNER_SHOULD_BE_STATIC_ANON"/>
    </Match>

    <!-- Spring Bean constructors may throw exceptions during initialization -->
    <Match>
        <Class name="com.schemafy.core.common.security.jwt.JwtProvider"/>
        <Bug pattern="CT_CONSTRUCTOR_THROW"/>
    </Match>
</FindBugsFilter>